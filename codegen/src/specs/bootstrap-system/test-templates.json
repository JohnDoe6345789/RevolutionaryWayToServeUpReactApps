{
  "testSuite": [
    "/**",
    " * {moduleName} Test Suite",
    " *",
    " * Comprehensive tests for {moduleName} module functionality.",
    " */",
    "",
    "const {className} = require('../src/{fileName}');",
    "",
    "describe('{className}', () => {",
    "  let instance;",
    "  let mockSpec;",
    "",
    "  beforeEach(() => {",
    "    mockSpec = {",
    "      id: 'test.{fileName}',",
    "      dependencies: {}",
    "      {specFields}",
    "    };",
    "    instance = new {className}(mockSpec);",
    "  });",
    "",
    "  test('should create {className} instance', () => {",
    "    expect(instance).toBeInstanceOf({className});",
    "    expect(instance.spec).toEqual(mockSpec);",
    "  });",
    "",
    "  test('should validate input correctly', () => {",
    "    expect(instance.validate({ id: 'test' })).toBe(true);",
    "    expect(instance.validate({})).toBe(false);",
    "    expect(instance.validate(null)).toBe(false);",
    "    expect(instance.validate('invalid')).toBe(false);",
    "  });",
    "",
    "  test('should initialize successfully', async () => {",
    "    await expect(instance.initialise()).resolves.toBe(instance);",
    "    expect(instance._initialized).toBe(true);",
    "  });",
    "",
    "  test('should execute with success result', async () => {",
    "    await instance.initialise();",
    "",
    "    const result = await instance.execute({ test: 'context' });",
    "",
    "    expect(result.success).toBe(true);",
    "    expect(result.result).toEqual({ message: '{className} executed successfully' });",
    "    expect(result.timestamp).toBeDefined();",
    "  });",
    "",
    "  test('should throw error when executing without initialization', async () => {",
    "    await expect(instance.execute({})).rejects.toThrow('{className} must be initialized before execution');",
    "  });",
    "",
    "  {methodTests}",
    "});"
  ],
  "methodTest": [
    "  test('should {description}', async () => {",
    "    await instance.initialise();",
    "",
    "    {testBody}",
    "  });",
    ""
  ],
  "integrationTests": [
    "describe('Integration Tests', () => {",
    "  test('should allow modules to depend on each other', async () => {",
    "    // Create modules with proper dependencies",
    "    const diSpec = { id: 'di-container', dependencies: {} };",
    "    const registrySpec = {",
    "      id: 'registry-system',",
    "      dependencies: { 'di-container': {} }",
    "    };",
    "",
    "    const diContainer = new DIContainer(diSpec);",
    "    const registrySystem = new RegistrySystem(registrySpec);",
    "",
    "    // Initialize DI container first",
    "    await diContainer.initialise();",
    "",
    "    // Initialize registry with DI container as dependency",
    "    registrySpec.dependencies['di-container'] = diContainer;",
    "    await registrySystem.initialise();",
    "",
    "    expect(diContainer._initialized).toBe(true);",
    "    expect(registrySystem._initialized).toBe(true);",
    "  });",
    "",
    "  test('should handle initialization order correctly', async () => {",
    "    const moduleLoader = new ModuleLoader({ id: 'module-loader' });",
    "    const pluginSystem = new PluginSystem({",
    "      id: 'plugin-system',",
    "      dependencies: { 'module-loader': moduleLoader }",
    "    });",
    "",
    "    // Initialize in dependency order",
    "    await moduleLoader.initialise();",
    "    await pluginSystem.initialise();",
    "",
    "    expect(moduleLoader._initialized).toBe(true);",
    "    expect(pluginSystem._initialized).toBe(true);",
    "  });",
    "});",
    "",
    "describe('Error Handling', () => {",
    "  test('should handle missing dependencies gracefully', async () => {",
    "    const registrySystem = new RegistrySystem({",
    "      id: 'registry-system',",
    "      dependencies: { 'non-existent': {} }",
    "    });",
    "",
    "    await expect(registrySystem.initialise()).rejects.toThrow('Missing required dependencies');",
    "  });",
    "",
    "  test('should handle invalid specifications', () => {",
    "    expect(() => new ModuleLoader(null)).toThrow();",
    "    expect(() => new ModuleLoader({})).toThrow();",
    "    expect(() => new ModuleLoader({ invalid: 'spec' })).toThrow();",
    "  });",
    "});"
  ]
}
